(this.webpackJsonpair_condition=this.webpackJsonpair_condition||[]).push([[0],{21:function(e,a,t){e.exports=t(41)},26:function(e,a,t){},28:function(e,a,t){},29:function(e,a,t){},35:function(e,a,t){},36:function(e,a,t){},37:function(e,a,t){},38:function(e,a,t){},40:function(e,a,t){},41:function(e,a,t){"use strict";t.r(a);var n,r,l=t(0),c=t.n(l),s=t(17),u=t.n(s),i=(t(26),t(11)),o=t(8),m=Object(l.createContext)(null),v=t(20),f=t(4),p=t.n(f),d=t(7),E=function(e){var a=Object(l.useState)(null),t=Object(d.a)(a,2),n=t[0],r=t[1],c=Object(l.useState)(null),s=Object(d.a)(c,2),u=s[0],i=s[1],o=Object(l.useState)(null),m=Object(d.a)(o,2),f=m[0],E=m[1],h=Object(l.useState)([]),g=Object(d.a)(h,2),N=g[0],y=g[1];return{getAllStation:function(e){var a,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(fetch(e));case 2:return a=n.sent,n.next=5,p.a.awrap(a.json());case 5:t=n.sent,r(t);case 7:case"end":return n.stop()}}))},allStation:n,getStation:function(e){var a,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(fetch(e));case 2:return a=n.sent,n.next=5,p.a.awrap(a.json());case 5:t=n.sent,i(t);case 7:case"end":return n.stop()}}))},station:u,getMeasuringStations:function(e){var a,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(fetch(e));case 2:return a=n.sent,n.next=5,p.a.awrap(a.json());case 5:t=n.sent,E(t);case 7:case"end":return n.stop()}}))},measuringStations:f,getMeasuringData:function(e){var a,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(fetch(e));case 2:return a=n.sent,n.next=5,p.a.awrap(a.json());case 5:t=n.sent,y((function(e){return[].concat(Object(v.a)(e),[t])}));case 7:case"end":return n.stop()}}))},measuringData:N}},h=(t(28),function(e){var a=e.search,t=Object(l.useState)(""),n=Object(d.a)(t,2),r=n[0],s=n[1];return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col search"},c.a.createElement("form",{className:"search__form",onSubmit:function(e){e.preventDefault(),""!==r&&a(r),s("")},method:"post"},c.a.createElement("input",{className:"search__input",type:"tekst",placeholder:"Enter city",value:r,onChange:function(e){s(e.target.value)}}),c.a.createElement("button",{type:"submit"},"Search")))))}),g=(t(29),function(e){var a=e.item,t=a.city.name,n=a.addressStreet,r=a.id;return c.a.createElement("div",{className:"col-sm-6 col-md-6 col-lg-4 col-xl-3"},c.a.createElement("div",{className:"station"},c.a.createElement("div",{className:"station__content"},c.a.createElement("h2",{className:"station__title"},t),c.a.createElement("p",{className:"station__address"},n),c.a.createElement("div",{className:"station__button"},c.a.createElement("button",null,c.a.createElement(i.b,{to:"/info/".concat(r)},"Show air quality"))))))}),N=(t(35),[]),y=function(){var e,a,t,s,u=Object(l.useContext)(m),i=function(l){var c=l.coords.latitude,u=l.coords.longitude;n=c,r=u,e=c+.2,a=c-.2,t=u+.25,s=u-.25},o=null!==u&&u.filter((function(n){return n.gegrLat>a&&n.gegrLat<e&&n.gegrLon>s&&n.gegrLon<t}));navigator.geolocation&&navigator.geolocation.getCurrentPosition(i);var v={latitude:n,longitude:r};return void 0!==v.latitude&&null!==u&&(N=[function(e,a){var t=function(e,a){return function(e,a){return Math.sqrt(e*e+a*a)}(e.gegrLat-a.gegrLat,e.gegrLon-a.gegrLon)};return a.reduce((function(a,n){return t(e,a)<t(e,n)?a:n}))}(v,u)]),c.a.createElement("div",{className:"geolocation"},c.a.createElement("h2",{className:"subtitle"},"Nearest measuring stations"),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row no-gutters"},o.length>0?o.map((function(e){return c.a.createElement(g,{key:e.id,item:e})})):N.map((function(e){return c.a.createElement(g,{key:e.id,item:e})})))))},b=function(){var e=Object(l.useContext)(m),a=Object(l.useState)([]),t=Object(d.a)(a,2),n=t[0],r=t[1];return c.a.createElement("div",{className:"container stations"},c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col"},c.a.createElement(h,{search:function(a){var t=e.filter((function(e){return null!==e.city?e.city.name.toLowerCase()===a.toLowerCase():null}));t.length>0?r(t):r([{key:"empty",name:"I don't have this place in the database, try to enter another place or go back to the nearest measuring stations"}])}}),n.length>0?c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row no-gutters"},"empty"===n[0].key?c.a.createElement("div",null,c.a.createElement("h2",{className:"subtitle"},n[0].name),c.a.createElement("button",{onClick:function(){return r([])},className:"button-info"},"Back")):n.map((function(e){return c.a.createElement(g,{key:e.id,item:e})})))):c.a.createElement(y,null))))},k=t(1),w=(t(36),function(e){var a=e.item;return c.a.createElement("div",{className:"icon"},function(e){if("PM10"===e.key){if(e.values[1].value<50)return c.a.createElement(k.c,{className:"happy"});if(e.values[1].value<200)return c.a.createElement(k.b,{className:"neutral"});if(e.values[1].value>200)return c.a.createElement(k.b,{className:"neutral-sad"});if(e.values[1].value>=300)return c.a.createElement(k.a,{className:"sad"})}else if("PM2.5"===e.key){if(e.values[1].value<25)return c.a.createElement(k.c,{className:"happy"});if(e.values[1].value>25)return c.a.createElement(k.b,{className:"neutral"});if(e.values[1].value>=30)return c.a.createElement(k.b,{className:"neutral-sad"});if(null===e.values[1].value)return c.a.createElement("span",null,"Brak danych")}else if("O3"===e.key){if(e.values[1].value<120)return c.a.createElement(k.c,{className:"happy"});if(e.values[1].value>120)return c.a.createElement(k.b,{className:"neutral"});if(e.values[1].value>180)return c.a.createElement(k.b,{className:"neutral-sad"});if(e.values[1].value>=240)return c.a.createElement(k.a,{className:"sad"})}else if("SO2"===e.key){if(e.values[1].value<125)return c.a.createElement(k.c,{className:"happy"});if(e.values[1].value>125)return c.a.createElement(k.b,{className:"neutral"});if(e.values[1].value>350)return c.a.createElement(k.b,{className:"neutral-sad"});if(e.values[1].value>=500)return c.a.createElement(k.a,{className:"sad"})}else if("NO2"===e.key){if(e.values[1].value<=40)return c.a.createElement(k.c,{className:"happy"});if(e.values[1].value>40)return c.a.createElement(k.b,{className:"neutral"});if(e.values[1].value>200)return c.a.createElement(k.b,{className:"neutral-sad"});if(e.values[1].value>=400)return c.a.createElement(k.a,{className:"sad"})}else if("CO"===e.key){if(e.values[1].value<=11.1)return c.a.createElement(k.c,{className:"happy"});if(e.values[1].value>11.1)return c.a.createElement(k.b,{className:"neutral"});if(e.values[1].value>=43.2)return c.a.createElement(k.a,{className:"sad"})}else if("C6H6"===e.key){if(e.values[1].value<=5)return c.a.createElement(k.c,{className:"happy"});if(e.values[1].value>5)return c.a.createElement(k.a,{className:"sad"})}}(a))}),O=(t(37),function(e){var a=e.result;return c.a.createElement("div",{className:"station-result",key:a.key},c.a.createElement("span",{className:"station-result__title"},"PM2.5"===a.key?"Suspended dust":null,"PM10"===a.key?"Suspended dust":null,"NO2"===a.key?"Nitrogen dioxide":null,"CO"===a.key?"Carbon monoxide":null,"C6H6"===a.key?"Benzene":null,"O3"===a.key?"Ozone":null,"SO2"===a.key?"Sulphur dioxide":null),c.a.createElement("span",{className:"station-result__name"},a.key),c.a.createElement(w,{item:a}))}),j=(t(38),function(e){var a=E(),t=a.getMeasuringStations,n=a.measuringStations,r=a.getMeasuringData,s=a.measuringData,u=e.match,i="https://cors-anywhere.herokuapp.com/http://api.gios.gov.pl/pjp-api/rest/station/sensors/".concat(u.params.id);return Object(l.useEffect)((function(){t(i)}),[]),Object(l.useEffect)((function(){if(null!==n){var e=!0,a=!1,t=void 0;try{for(var l,c=n[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var s=l.value;r("https://cors-anywhere.herokuapp.com/http://api.gios.gov.pl/pjp-api/rest/data/getData/".concat(s.id))}}catch(u){a=!0,t=u}finally{try{e||null==c.return||c.return()}finally{if(a)throw t}}}}),[n]),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("button",{onClick:function(){return e.history.goBack()},className:"button-info"},"Back"),null!==s&&c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("div",{className:"air-info"},c.a.createElement("div",{className:"air-info__content"},s.map((function(e){return c.a.createElement(O,{key:e.key,result:e})}))))))))))});t(39),t(40);var S=function(){var e=E(),a=e.getAllStation,t=e.allStation;return Object(l.useEffect)((function(){a("https://cors-anywhere.herokuapp.com/http://api.gios.gov.pl/pjp-api/rest/station/findAll")}),[]),c.a.createElement("div",{className:"App"},c.a.createElement("h1",{className:"App__title"},"Air quality app"),c.a.createElement(i.a,null,c.a.createElement(o.c,null,c.a.createElement(m.Provider,{value:t},c.a.createElement(o.a,{exact:!0,path:"/",component:b}),c.a.createElement(o.a,{exact:!0,path:"/info/:id",component:j})))),c.a.createElement("footer",{className:"footer"},"Air quality data comes from:"," ",c.a.createElement("a",{href:"http://powietrze.gios.gov.pl/pjp/home",target:"_blank",rel:"noopener noreferrer"},"powietrze.gios.gov.pl")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.bf518e69.chunk.js.map